## Задание 1.

В идеальном мире новая версия уже протестирована и отлажена, поэтому проще всего будет воспользоваться `rolling update` с указанием `maxSurge` в 10-15%. Проводить обновление, естественно, следует в момент минимальной нагрузки на сервис, `rolling update` позволит аккуратно и постепенно заменить все поды на новую версию с минимальными просадками.

В целом, можно было бы посмотреть на `canary` - но в таком случае мало информации и смущает 4-ый пункт:
> Обновление мажорное, новые версии приложения не умеют работать со старыми.

## Задание 2.

Well, вот [deployment](src/deploy.yaml), а вот [service](src/svc.yaml).
Наблюдал за процессом обновления через 2 команды в двух терминалах:
```bash
watch kubectl get pods
watch kubectl exec deployment/update-test -- curl test-svc:9001
```
По моим тестам без потери доступности проходит только апдейт со следующими параметрами:
```yaml
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
```
* При попытке повысить `maxUnavailable` - в curl так или иначе проскакивает ошибка.
* Апдейт при подобной схеме проходит за 18-20 секунд (с предварительно запуленными образами).
* При попытке перехода на версию nginx:1.28 апдейт встаёт на `ErrImagePull` и `ImagePullBackOff`(при этом curl всё ещё проходит).  

Откатываемся командой:
```bash
vi:src/ (main✗) $ kubectl rollout undo deployment update-test
deployment.apps/update-test rolled back
```